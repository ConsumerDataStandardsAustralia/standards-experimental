{
    "openapi": "3.0.3",
    "info": {
        "contact": {
            "email": "contact@consumerdatastandards.gov.au",
            "name": "Consumer Data Standards",
            "url": "https://consumerdatastandards.gov.au"
        },
        "description": "Specification of endpoints defined in the Simple Bank Account Origination experimental standard.  This is an experimental standard created by the Data Standards Body (DSB) as part of the Consumer Data Standards",
        "license": {
            "name": "MIT License",
            "url": "https://opensource.org/licenses/MIT"
        },
        "title": "CDR Experimantal Simple Bank Account Origination API",
        "version": "0.0.4"
    },
    "servers": [
        {
            "url": "https://data.holder.com.au/cds-au/v1"
        }
    ],
    "paths": {
        "/DSB/banking/origination/schemes/{schemeId}": {
            "summary": "Get Origination Scheme",
            "x-version": "1",
            "get": {
                "description": "Obtain the meta data describing how to make an application for a family of products.",
                "operationId": "getOriginationScheme",
                "tags": [
                    "Banking",
                    "Products"
                ],
                "parameters": [
                    {
                        "name": "schemeId",
                        "description": "Obtain the details of a specific origination scheme.",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "$ref": "#/components/parameters/x-v"
                    },
                    {
                        "$ref": "#/components/parameters/x-min-v"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OriginationSchemeResponseV1"
                                }
                            }
                        },
                        "description": "Successful response",
                        "headers": {
                            "x-v": {
                                "$ref": "#/components/headers/x-v"
                            }
                        }
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResponseErrorListV2"
                                }
                            }
                        },
                        "description": "The following error codes MUST be supported:<br/><ul class=\"error-code-list\"><li>[400 - Invalid Field](#error-400-field-invalid)</li><li>[400 - Missing Field](#error-400-field-missing)</li><li>[400 - Invalid Page Size](#error-400-field-invalid-page-size)</li><li>[400 - Invalid Version](#error-400-header-invalid-version)</li></ul>"
                    },
                    "406": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResponseErrorListV2"
                                }
                            }
                        },
                        "description": "The following error codes MUST be supported:<br/><ul class=\"error-code-list\"><li>[406 - Unsupported Version](#error-406-header-unsupported-version)</li></ul>"
                    },
                    "422": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResponseErrorListV2"
                                }
                            }
                        },
                        "description": "The following error codes MUST be supported:<br/><ul class=\"error-code-list\"><li>[422 - Invalid Page](#error-422-field-invalid-page)</li></ul>"
                    }
                }
            }
        },
        "/DSB/banking/accounts": {
            "summary": "Apply For Bank Account",
            "x-version": "1",
            "post": {
                "description": "Submit an application, on behalf of a consumer, to apply for an account to be originated.",
                "operationId": "applyForAccount",
                "tags": [
                    "Banking",
                    "Accounts"
                ],
                "parameters": [
                    {
                        "$ref": "#/components/parameters/x-v"
                    },
                    {
                        "$ref": "#/components/parameters/x-min-v"
                    }
                ],
                "requestBody": {
                    "description": "Application data provided in accordance to a defined origination scheme",
                    "content": {
                        "application/json": {
                            "schema": {}
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        },
                        "description": "Successful response",
                        "headers": {
                            "x-v": {
                                "$ref": "#/components/headers/x-v"
                            }
                        }
                    },
                    "400": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResponseErrorListV2"
                                }
                            }
                        },
                        "description": "The following error codes MUST be supported:<br/><ul class=\"error-code-list\"><li>[400 - Invalid Field](#error-400-field-invalid)</li><li>[400 - Missing Field](#error-400-field-missing)</li><li>[400 - Invalid Page Size](#error-400-field-invalid-page-size)</li><li>[400 - Invalid Version](#error-400-header-invalid-version)</li></ul>"
                    },
                    "406": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResponseErrorListV2"
                                }
                            }
                        },
                        "description": "The following error codes MUST be supported:<br/><ul class=\"error-code-list\"><li>[406 - Unsupported Version](#error-406-header-unsupported-version)</li></ul>"
                    },
                    "422": {
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResponseErrorListV2"
                                }
                            }
                        },
                        "description": "The following error codes MUST be supported:<br/><ul class=\"error-code-list\"><li>[422 - Invalid Page](#error-422-field-invalid-page)</li></ul>"
                    }
                }
            }
        }
    },
    "components": {
        "headers": {
            "x-v": {
                "schema": {
                    "description": "The [version](#response-headers) of the API end point that the data holder has responded with.",
                    "type": "string"
                }
            }
        },
        "parameters": {
            "x-v": {
                "name": "x-v",
                "description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder must respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)",
                "in": "header",
                "required": true,
                "schema": {
                    "type": "string"
                }
            },
            "x-min-v": {
                "name": "x-min-v",
                "description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder must respond with a 406 Not Acceptable.",
                "in": "header",
                "required": false,
                "schema": {
                    "type": "string"
                }
            }
        },
        "responses": {},
        "schemas": {
            "OriginationSchemeResponseV1": {
                "required": [
                    "data",
                    "links",
                    "meta"
                ],
                "type": "object",
                "properties": {
                    "data": {
                        "required": [
                            "schemeUType"
                        ],
                        "x-conditional": [
                            "lixi1",
                            "lixi2",
                            "cdrApplyV1"
                        ],
                        "type": "object",
                        "properties": {
                            "schemeUType": {
                                "type": "string",
                                "description": "The type of origination scheme represented",
                                "enum": [
                                    "lixi1",
                                    "lixi2",
                                    "cdrApplyForBankAccountV1"
                                ]
                            },
                            "lixi1": {
                                "type": "object",
                                "description": "Provides the metadata for making an application using a LIXI1 gateway. Mandatory if schemeUType is set to 'lixi1'",
                                "properties": {}
                            },
                            "lixi2": {
                                "type": "object",
                                "description": "Provides the metadata for making an application using a LIXI2 gateway. Mandatory if schemeUType is set to 'lixi2'",
                                "required": [
                                    "baseUri",
                                    "lixiCode",
                                    "lixiVersion"
                                ],
                                "properties": {
                                    "baseUri": {
                                        "type": "string",
                                        "description": "Base path used to access the LIXI2 gateway",
                                        "x-cds-type": "URIString"
                                    },
                                    "lixiCode": {
                                        "type": "string",
                                        "description": "The LIXI participant code, assigned by LIXI, for the receiving organisation"
                                    },
                                    "lixiVersion": {
                                        "type": "string",
                                        "description": "The supported version of the LIXI2 schema"
                                    },
                                    "lixiCustomVersion": {
                                        "type": "string",
                                        "description": "Optional identifier of a custom version of the LIXI payloads that are accepted if the receiving organisation has made custom extensions or modifications to the LIXI schema"
                                    },
                                    "apiVersion": {
                                        "type": "string",
                                        "description": "Optional version of an API schema definition"
                                    },
                                    "productCodeMappings": {
                                        "type": "array",
                                        "description": "Optional mapping of CDR product IDs to product codes used in LIXI applications via this origination scheme.  If absent, or if a mapping is not included, then the CDR product ID is expected to be used as the LIXI product code",
                                        "items": {
                                            "required": [
                                                "productId",
                                                "productCode"
                                            ],
                                            "type": "object",
                                            "properties": {
                                                "productId": {
                                                    "type": "string",
                                                    "description": "The CDR product ID to map from"
                                                },
                                                "productCode": {
                                                    "type": "string",
                                                    "description": "The LIXI product code to map to"
                                                }
                                            }
                                        }
                                    },
                                    "schematronUri": {
                                        "type": "string",
                                        "description": "Optional reference to a Schematron file indicating the valid use of this LIXI gateway",
                                        "x-cds-type": "URIString"
                                    },
                                    "apiSpecificationUri": {
                                        "type": "string",
                                        "description": "Optional reference to an Open API Specification file describing the API version specified in the 'apiVersion' field",
                                        "x-cds-type": "URIString"
                                    },
                                    "customVersionUri": {
                                        "type": "string",
                                        "description": "Optional reference to additional information describing the customisations and extensions make to the LIXI scheams",
                                        "x-cds-type": "URIString"
                                    }
                                }
                            },
                            "cdrApplyForBankAccountV1": {
                                "type": "object",
                                "description": "Provides the metadata for making an application using version 1 of the CDR 'Apply For Bank Account' endpoint. Mandatory if schemeUType is set to 'cdrApplyForBankAccountV1'",
                                "required": [
                                ],
                                "properties": {}
                            }
                        }
                    },
                    "links": {
                        "$ref": "#/components/schemas/Links"
                    },
                    "meta": {
                        "$ref": "#/components/schemas/Meta"
                    }
                }
            },
            "ResponseErrorListV2": {
                "required": [
                    "errors"
                ],
                "type": "object",
                "properties": {
                    "errors": {
                        "type": "array",
                        "description": "",
                        "items": {
                            "required": [
                                "code",
                                "detail",
                                "title"
                            ],
                            "type": "object",
                            "properties": {
                                "code": {
                                    "type": "string",
                                    "description": "The code of the error encountered. Where the error is specific to the respondent, an application-specific error code, expressed as a string value. If the error is application-specific, the URN code that the specific error extends must be provided in the meta object. Otherwise, the value is the error code URN."
                                },
                                "title": {
                                    "type": "string",
                                    "description": "A short, human-readable summary of the problem that MUST NOT change from occurrence to occurrence of the problem represented by the error code."
                                },
                                "detail": {
                                    "type": "string",
                                    "description": "A human-readable explanation specific to this occurrence of the problem."
                                },
                                "meta": {
                                    "$ref": "#/components/schemas/MetaError"
                                }
                            }
                        }
                    }
                },
                "x-conditional": [
                    "meta"
                ]
            },
            "Links": {
                "properties": {
                    "self": {
                        "description": "Fully qualified link that generated the current response document",
                        "type": "string",
                        "x-cds-type": "URIString"
                    }
                },
                "required": [
                    "self"
                ],
                "type": "object"
            },
            "Meta": {
                "type": "object"
            },
            "LinksPaginated": {
                "properties": {
                    "self": {
                        "description": "Fully qualified link that generated the current response document",
                        "type": "string",
                        "x-cds-type": "URIString"
                    },
                    "first": {
                        "description": "URI to the first page of this set. Mandatory if this response is not the first page",
                        "type": "string",
                        "x-cds-type": "URIString"
                    },
                    "prev": {
                        "description": "URI to the previous page of this set. Mandatory if this response is not the first page",
                        "type": "string",
                        "x-cds-type": "URIString"
                    },
                    "next": {
                        "description": "URI to the next page of this set. Mandatory if this response is not the last page",
                        "type": "string",
                        "x-cds-type": "URIString"
                    },
                    "last": {
                        "description": "URI to the last page of this set. Mandatory if this response is not the last page",
                        "type": "string",
                        "x-cds-type": "URIString"
                    }
                },
                "required": [
                    "self"
                ],
                "type": "object",
                "x-conditional": [
                    "first",
                    "prev",
                    "next",
                    "last"
                ]
            },
            "MetaPaginated": {
                "properties": {
                    "totalRecords": {
                        "description": "The total number of records in the full set. See [pagination](#pagination).",
                        "type": "integer",
                        "x-cds-type": "NaturalNumber"
                    },
                    "totalPages": {
                        "description": "The total number of pages in the full set. See [pagination](#pagination).",
                        "type": "integer",
                        "x-cds-type": "NaturalNumber"
                    }
                },
                "required": [
                    "totalPages",
                    "totalRecords"
                ],
                "type": "object"
            },
            "MetaError": {
                "type": "object",
                "properties": {
                    "urn": {
                        "type": "string",
                        "description": "The CDR error code URN which the application-specific error code extends. Mandatory if the error `code` is an application-specific error rather than a standardised error code."
                    }
                },
                "description": "Additional data for customised error codes",
                "x-conditional": [
                    "urn"
                ]
            }
        }
    }
}